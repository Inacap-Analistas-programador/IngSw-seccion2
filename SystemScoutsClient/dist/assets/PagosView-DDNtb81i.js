import{_ as wo,r as i,o as Lo,c as q,b as s,d as t,e,g as m,l as N,n as j,h as p,p as f,i as lo,w as u,q as g,F as _,f as z,s as x,t as n,z as Io,m as ao,x as Fo}from"./index-DF_ZuZfT.js";import{B as to}from"./BaseModal-Cxz_boCF.js";import{N as Bo}from"./NotificationToast-DLWa24oL.js";import{A as v}from"./AppIcons-qhiaqEg8.js";const jo={class:"pago-view"},$o={class:"navegacion-vistas"},Do={key:0,class:"vista-registrar"},Go={class:"card-registro"},Ro={class:"card-header"},ho={class:"tipo-registro-selector"},qo={class:"search-section"},No={class:"form-group search-group"},Oo={class:"search-input-wrapper"},Ho={class:"search-icon"},Jo={key:0,class:"resultados-busqueda"},Ko=["onClick"],Qo={class:"resultado-info"},Wo={class:"rut"},Xo={class:"resultado-extra"},Yo={class:"grupo"},Zo={key:1,class:"no-resultados"},oe={class:"form-grid"},ee={class:"form-group"},le={class:"form-group"},ae={class:"form-group"},te={class:"form-group"},se={class:"form-group"},ne={class:"form-group"},re={class:"form-grid"},ie={class:"form-group"},ue=["value"],de={class:"form-group"},ve={class:"input-with-prefix"},pe={class:"form-group"},ce={class:"form-group"},me={class:"form-group full-width"},ge={class:"file-upload-wrapper"},be={for:"file-individual",class:"file-upload-label"},fe={class:"form-actions"},Ce=["disabled"],ye={class:"form-grid"},ke={class:"form-group"},Pe=["value"],_e={class:"form-group"},ze=["value"],xe=["disabled"],Ve={key:0,class:"spinner"},Se={key:0,class:"participantes-section"},Te={class:"participantes-header"},Me={class:"participantes-lista"},Ae=["id","value"],Ee=["for"],Ue={class:"participante-info"},we={class:"rut"},Le={class:"email"},Ie={key:1,class:"form-divider"},Fe={key:2,class:"form-grid"},Be={class:"form-group"},je={class:"input-with-prefix"},$e={class:"form-group"},De={class:"form-group"},Ge={key:3,class:"form-group full-width"},Re={class:"file-upload-wrapper"},he={for:"file-masivo",class:"file-upload-label"},qe={key:4,class:"resumen-masivo"},Ne={class:"resumen-item"},Oe={class:"resumen-item"},He={class:"resumen-item total"},Je={key:5,class:"form-actions"},Ke=["disabled"],Qe={key:1,class:"vista-buscar"},We={class:"card-registro"},Xe={class:"card-header"},Ye={class:"filtros-avanzados"},Ze={class:"form-grid"},ol={class:"form-group"},el={class:"form-group"},ll=["value"],al={class:"form-group"},tl=["value"],sl={class:"form-group"},nl={class:"filtros-acciones"},rl={class:"tabla-pagos"},il={key:0},ul={key:1},dl={class:"badge-grupo"},vl={class:"monto"},pl={class:"actions-cell"},cl=["onClick"],ml=["onClick"],gl=["onClick"],bl=["onClick"],fl={key:0,class:"pagination"},Cl=["disabled"],yl={class:"pagination-info"},kl=["disabled"],Pl={class:"modal-editar-pago"},_l={class:"form-group"},zl={class:"form-group"},xl={class:"form-group"},Vl={class:"form-group"},Sl={class:"form-group"},Tl={class:"modal-confirmar"},Ml={__name:"PagosView",setup(Al){const E=i("registro"),S=i("individual"),X=a=>{E.value=a,a==="historico"&&ko()},so=[{id:1,nombre:"Juan Pérez González",rut:"12.345.678-9",email:"juan.perez@scouts.cl",telefono:"+56 9 8765 4321",grupo:"Biobío",direccion:"Av. O'Higgins 123, Concepción"},{id:2,nombre:"María González Silva",rut:"98.765.432-1",email:"maria.gonzalez@scouts.cl",telefono:"+56 9 1234 5678",grupo:"Ñuble",direccion:"Calle Libertad 456, Chillán"},{id:3,nombre:"Pedro Silva Rojas",rut:"11.223.344-5",email:"pedro.silva@scouts.cl",telefono:"+56 9 5555 6666",grupo:"Biobío",direccion:"Pasaje Los Pinos 789, Los Ángeles"},{id:4,nombre:"Ana Martínez López",rut:"55.667.788-9",email:"ana.martinez@scouts.cl",telefono:"+56 9 7777 8888",grupo:"Ñuble",direccion:"Av. Brasil 321, Chillán"},{id:5,nombre:"Carlos Rojas Mendoza",rut:"99.887.766-5",email:"carlos.rojas@scouts.cl",telefono:"+56 9 9999 0000",grupo:"Biobío",direccion:"Calle Principal 654, Talcahuano"},{id:6,nombre:"Daniela Torres Vargas",rut:"22.334.455-6",email:"daniela.torres@scouts.cl",telefono:"+56 9 1111 2222",grupo:"Ñuble",direccion:"Av. Collín 147, Chillán"},{id:7,nombre:"Roberto Morales Castro",rut:"33.445.566-7",email:"roberto.morales@scouts.cl",telefono:"+56 9 3333 4444",grupo:"Biobío",direccion:"Calle Freire 258, Concepción"}],no=[{value:1,label:"Formación de Dirigentes Básico - FDB 2025"},{value:2,label:"Curso de Especialidad en Montañismo - CEM 2025"},{value:3,label:"Formación de Dirigentes Avanzado - FDA 2025"},{value:4,label:"Taller de Primeros Auxilios - TPA 2025"},{value:5,label:"Curso de Campismo y Vida al Aire Libre - CCVAL 2025"}],ro=[{value:1,label:"Grupo Scout Biobío"},{value:2,label:"Grupo Scout Ñuble"},{value:3,label:"Grupo Scout Concepción"},{value:4,label:"Grupo Scout Los Ángeles"}],Y=[{id:1,nombre:"Juan Pérez González",rut:"12.345.678-9",curso:"Formación de Dirigentes Básico",monto:25e3,estado:"Pendiente",fecha:"2025-10-20",grupo:"Biobío",comprobante:null,email:"juan.perez@scouts.cl",telefono:"+56 9 8765 4321"},{id:2,nombre:"María González Silva",rut:"98.765.432-1",curso:"Curso de Especialidad en Montañismo",monto:3e4,estado:"Confirmado",fecha:"2025-10-18",grupo:"Ñuble",comprobante:"comprobante123.pdf",email:"maria.gonzalez@scouts.cl",telefono:"+56 9 1234 5678"},{id:3,nombre:"Pedro Silva Rojas",rut:"11.223.344-5",curso:"Formación de Dirigentes Avanzado",monto:35e3,estado:"Confirmado",fecha:"2025-10-15",grupo:"Biobío",comprobante:"comprobante456.pdf",email:"pedro.silva@scouts.cl",telefono:"+56 9 5555 6666"},{id:4,nombre:"Ana Martínez López",rut:"55.667.788-9",curso:"Formación de Dirigentes Básico",monto:25e3,estado:"Pendiente",fecha:"2025-10-22",grupo:"Ñuble",comprobante:null,email:"ana.martinez@scouts.cl",telefono:"+56 9 7777 8888"},{id:5,nombre:"Carlos Rojas Mendoza",rut:"99.887.766-5",curso:"Taller de Primeros Auxilios",monto:28e3,estado:"Confirmado",fecha:"2025-10-17",grupo:"Biobío",comprobante:"comprobante789.pdf",email:"carlos.rojas@scouts.cl",telefono:"+56 9 9999 0000"}],V=i([]),O=i([]),$=i([]),D=i([]),H=i(!1),U=i({mensaje:"",tipo:""}),J=i(!1),K=i(!1),c=i(null),k=i(""),T=i([]),io=i(!1),r=i({personaId:null,nombre:"",rut:"",email:"",telefono:"",grupo:"",direccion:"",curso:"",valor_pagado:"",fecha_pago:"",metodo_pago:"Transferencia",file:null}),d=i({grupo:"",curso:"",valor_pagado:"",fecha_pago:"",metodo_pago:"Transferencia",file:null}),P=i([]),b=i([]),w=i(!1),G=i(""),L=i(""),I=i(""),F=i(""),R=i(""),C=i(1),B=i(10);Lo(async()=>{O.value=so,$.value=no,D.value=ro,V.value=Y});const uo=()=>{if(!k.value||k.value.length<2){T.value=[];return}const a=k.value.toLowerCase();T.value=O.value.filter(o=>o.nombre.toLowerCase().includes(a)||o.rut.toLowerCase().includes(a)||o.grupo&&o.grupo.toLowerCase().includes(a)).slice(0,5)},vo=a=>{r.value={personaId:a.id,nombre:a.nombre,rut:a.rut,email:a.email,telefono:a.telefono,grupo:a.grupo,direccion:a.direccion,curso:r.value.curso,valor_pagado:r.value.valor_pagado,fecha_pago:r.value.fecha_pago,metodo_pago:r.value.metodo_pago,file:r.value.file},T.value=[],k.value=a.nombre},Z=()=>{r.value={personaId:null,nombre:"",rut:"",email:"",telefono:"",grupo:"",direccion:"",curso:"",valor_pagado:"",fecha_pago:"",metodo_pago:"Transferencia",file:null},k.value="",T.value=[]},po=a=>{r.value.file=a.target.files[0]},co=async()=>{try{y("Pago individual registrado correctamente","exito"),Z()}catch(a){console.error("Error al registrar pago:",a),y("Error al registrar pago: "+a.message,"error")}},mo=a=>{d.value.file=a.target.files[0]},go=()=>{P.value=[],b.value=[]},bo=async()=>{try{w.value=!0;const o=D.value.find(l=>l.value===d.value.grupo)?.label||"";P.value=O.value.filter(l=>o.toLowerCase().includes(l.grupo.toLowerCase())),y(`${P.value.length} participantes cargados`,"exito")}catch(a){console.error("Error al cargar participantes:",a),y("Error al cargar participantes: "+a.message,"error")}finally{w.value=!1}},fo=()=>{b.value=[...P.value]},Co=()=>{b.value=[]},oo=()=>{d.value={grupo:"",curso:"",valor_pagado:"",fecha_pago:"",metodo_pago:"Transferencia",file:null},P.value=[],b.value=[]},yo=async()=>{try{y(`Pago masivo registrado para ${b.value.length} usuarios`,"exito"),oo()}catch(a){console.error("Error al registrar pago masivo:",a),y("Error al registrar pago masivo: "+a.message,"error")}};async function ko(){try{H.value=!0,V.value=Y}catch(a){console.error("Error al cargar pagos:",a)}finally{H.value=!1}}const Po=()=>{R.value=G.value,C.value=1},_o=()=>{G.value="",L.value="",I.value="",F.value="",R.value="",C.value=1},M=q(()=>{let a=[...V.value];if(R.value){const o=R.value.toLowerCase();a=a.filter(l=>l.nombre?.toLowerCase().includes(o)||l.rut?.toLowerCase().includes(o)||l.email?.toLowerCase().includes(o))}return L.value&&(a=a.filter(o=>o.curso?.includes(L.value))),I.value&&(a=a.filter(o=>o.grupo===I.value)),F.value&&(a=a.filter(o=>o.estado===F.value)),a}),h=q(()=>Math.ceil(M.value.length/B.value)),zo=q(()=>{const a=(C.value-1)*B.value;return M.value.slice(a,a+B.value)});q(()=>M.value.filter(a=>a.estado!=="Anulado").reduce((a,o)=>a+o.monto,0));const eo=a=>{a>=1&&a<=h.value&&(C.value=a)},xo=a=>a?new Date(a).toLocaleDateString("es-CL",{day:"2-digit",month:"short",year:"numeric"}):"-",Vo=a=>{c.value={...a},J.value=!0},Q=()=>{J.value=!1,c.value=null},So=a=>{c.value=a,K.value=!0},W=()=>{K.value=!1,c.value=null},To=async()=>{try{const a=V.value.findIndex(o=>o.id===c.value.id);a!==-1&&(V.value[a]={...c.value}),y("Pago actualizado correctamente","exito"),Q()}catch(a){console.error("Error al guardar pago:",a),y("Error al guardar pago: "+a.message,"error")}},Mo=async()=>{try{const a=V.value.findIndex(o=>o.id===c.value.id);a!==-1&&(V.value[a].estado="Anulado"),y("Pago anulado correctamente","exito"),W()}catch(a){console.error("Error al anular pago:",a),y("Error al anular pago: "+a.message,"error")}},Ao=a=>{console.log("Ver detalle:",a)},Eo=a=>{console.log("Descargar comprobante:",a.comprobante)},Uo=()=>{console.log("Exportar a Excel"),y("Función de exportación próximamente","info")};function y(a,o){U.value={mensaje:a,tipo:o},setTimeout(()=>U.value={mensaje:"",tipo:""},3e3)}return(a,o)=>(t(),s("div",jo,[e("div",$o,[e("button",{onClick:o[0]||(o[0]=l=>X("registro")),class:j({active:E.value==="registro"})},[p(v,{name:"clipboard",size:20}),o[34]||(o[34]=e("span",null,"Registro de Pago",-1))],2),e("button",{onClick:o[1]||(o[1]=l=>X("historico")),class:j({active:E.value==="historico"})},[p(v,{name:"chart-bar",size:20}),o[35]||(o[35]=e("span",null,"Histórico",-1))],2)]),E.value==="registro"?(t(),s("div",Do,[e("div",Go,[e("div",Ro,[e("h3",null,[p(v,{name:"clipboard",size:24}),o[36]||(o[36]=f(" Registro de Pago",-1))]),o[37]||(o[37]=e("p",null,"Selecciona el tipo de registro y completa la información",-1))]),e("div",ho,[e("button",{type:"button",onClick:o[2]||(o[2]=l=>S.value="individual"),class:j(["tipo-btn",{active:S.value==="individual"}])},[p(v,{name:"user",size:20}),o[38]||(o[38]=e("span",null,"Individual",-1))],2),e("button",{type:"button",onClick:o[3]||(o[3]=l=>S.value="masivo"),class:j(["tipo-btn",{active:S.value==="masivo"}])},[p(v,{name:"users",size:20}),o[39]||(o[39]=e("span",null,"Masivo",-1))],2)]),S.value==="individual"?(t(),s("form",{key:0,onSubmit:lo(co,["prevent"]),class:"form-registro-individual"},[e("div",qo,[e("div",No,[o[40]||(o[40]=e("label",null,"Buscar Participante",-1)),e("div",Oo,[u(e("input",{"onUpdate:modelValue":o[4]||(o[4]=l=>k.value=l),type:"text",placeholder:"Buscar por RUT, Nombre o Grupo...",onInput:uo,class:"search-input"},null,544),[[g,k.value]]),e("span",Ho,[p(v,{name:"search",size:18})])])]),T.value.length>0?(t(),s("div",Jo,[(t(!0),s(_,null,z(T.value,l=>(t(),s("div",{key:l.id,onClick:A=>vo(l),class:"resultado-item"},[e("div",Qo,[e("strong",null,n(l.nombre),1),e("span",Wo,n(l.rut),1)]),e("div",Xo,[e("span",Yo,n(l.grupo),1)])],8,Ko))),128))])):k.value&&!io.value?(t(),s("div",Zo," No se encontraron personas con ese criterio ")):m("",!0)]),e("div",oe,[e("div",ee,[o[41]||(o[41]=e("label",null,"Nombre Completo",-1)),u(e("input",{"onUpdate:modelValue":o[5]||(o[5]=l=>r.value.nombre=l),type:"text",readonly:"",class:"readonly-input"},null,512),[[g,r.value.nombre]])]),e("div",le,[o[42]||(o[42]=e("label",null,"RUT",-1)),u(e("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>r.value.rut=l),type:"text",readonly:"",class:"readonly-input"},null,512),[[g,r.value.rut]])]),e("div",ae,[o[43]||(o[43]=e("label",null,"Email",-1)),u(e("input",{"onUpdate:modelValue":o[7]||(o[7]=l=>r.value.email=l),type:"email",readonly:"",class:"readonly-input"},null,512),[[g,r.value.email]])]),e("div",te,[o[44]||(o[44]=e("label",null,"Teléfono",-1)),u(e("input",{"onUpdate:modelValue":o[8]||(o[8]=l=>r.value.telefono=l),type:"text",readonly:"",class:"readonly-input"},null,512),[[g,r.value.telefono]])]),e("div",se,[o[45]||(o[45]=e("label",null,"Grupo Scout",-1)),u(e("input",{"onUpdate:modelValue":o[9]||(o[9]=l=>r.value.grupo=l),type:"text",readonly:"",class:"readonly-input"},null,512),[[g,r.value.grupo]])]),e("div",ne,[o[46]||(o[46]=e("label",null,"Dirección",-1)),u(e("input",{"onUpdate:modelValue":o[10]||(o[10]=l=>r.value.direccion=l),type:"text",readonly:"",class:"readonly-input"},null,512),[[g,r.value.direccion]])])]),o[57]||(o[57]=e("div",{class:"form-divider"},[e("h4",null,"💵 Información del Pago")],-1)),e("div",re,[e("div",ie,[o[48]||(o[48]=e("label",null,"Curso / Capacitación *",-1)),u(e("select",{"onUpdate:modelValue":o[11]||(o[11]=l=>r.value.curso=l),required:""},[o[47]||(o[47]=e("option",{value:""},"Seleccione un curso",-1)),(t(!0),s(_,null,z($.value,l=>(t(),s("option",{key:l.value,value:l.value},n(l.label),9,ue))),128))],512),[[x,r.value.curso]])]),e("div",de,[o[50]||(o[50]=e("label",null,"Valor Pagado *",-1)),e("div",ve,[o[49]||(o[49]=e("span",{class:"prefix"},"$",-1)),u(e("input",{"onUpdate:modelValue":o[12]||(o[12]=l=>r.value.valor_pagado=l),type:"number",required:"",placeholder:"25000"},null,512),[[g,r.value.valor_pagado,void 0,{number:!0}]])])]),e("div",pe,[o[51]||(o[51]=e("label",null,"Fecha de Pago *",-1)),u(e("input",{"onUpdate:modelValue":o[13]||(o[13]=l=>r.value.fecha_pago=l),type:"date",required:""},null,512),[[g,r.value.fecha_pago]])]),e("div",ce,[o[53]||(o[53]=e("label",null,"Método de Pago",-1)),u(e("select",{"onUpdate:modelValue":o[14]||(o[14]=l=>r.value.metodo_pago=l)},[...o[52]||(o[52]=[e("option",{value:"Transferencia"},"Transferencia",-1),e("option",{value:"Efectivo"},"Efectivo",-1),e("option",{value:"Tarjeta"},"Tarjeta",-1)])],512),[[x,r.value.metodo_pago]])])]),e("div",me,[o[54]||(o[54]=e("label",null,"Comprobante de Pago (opcional)",-1)),e("div",ge,[e("input",{type:"file",onChange:po,id:"file-individual",accept:".pdf,.jpg,.jpeg,.png"},null,32),e("label",be,[p(v,{name:"file",size:18}),e("span",null,n(r.value.file?r.value.file.name:"Seleccionar archivo"),1)])])]),e("div",fe,[e("button",{type:"submit",class:"btn btn-primario",disabled:!r.value.personaId},[p(v,{name:"check",size:16}),o[55]||(o[55]=f(" Registrar Pago ",-1))],8,Ce),e("button",{type:"button",onClick:Z,class:"btn btn-secundario"},[p(v,{name:"x",size:16}),o[56]||(o[56]=f(" Limpiar ",-1))])])],32)):m("",!0),S.value==="masivo"?(t(),s("form",{key:1,onSubmit:lo(yo,["prevent"]),class:"form-registro-masivo"},[e("div",ye,[e("div",ke,[o[59]||(o[59]=e("label",null,"Grupo Scout *",-1)),u(e("select",{"onUpdate:modelValue":o[15]||(o[15]=l=>d.value.grupo=l),required:"",onChange:go},[o[58]||(o[58]=e("option",{value:""},"Seleccione un grupo",-1)),(t(!0),s(_,null,z(D.value,l=>(t(),s("option",{key:l.value,value:l.value},n(l.label),9,Pe))),128))],544),[[x,d.value.grupo]])]),e("div",_e,[o[61]||(o[61]=e("label",null,"Curso / Capacitación *",-1)),u(e("select",{"onUpdate:modelValue":o[16]||(o[16]=l=>d.value.curso=l),required:""},[o[60]||(o[60]=e("option",{value:""},"Seleccione un curso",-1)),(t(!0),s(_,null,z($.value,l=>(t(),s("option",{key:l.value,value:l.value},n(l.label),9,ze))),128))],512),[[x,d.value.curso]])])]),e("button",{type:"button",onClick:bo,class:"btn btn-info",disabled:!d.value.grupo||!d.value.curso||w.value},[w.value?(t(),s("span",Ve)):(t(),N(v,{key:1,name:"users",size:16})),f(" "+n(w.value?"Cargando...":"Cargar Participantes"),1)],8,xe),P.value.length>0?(t(),s("div",Se,[e("div",Te,[e("h4",null,"Participantes Disponibles ("+n(P.value.length)+")",1),e("div",{class:"seleccion-acciones"},[e("button",{type:"button",onClick:fo,class:"btn-link"},"Seleccionar todos"),e("button",{type:"button",onClick:Co,class:"btn-link"},"Deseleccionar todos")])]),e("div",Me,[(t(!0),s(_,null,z(P.value,l=>(t(),s("div",{key:l.id,class:"participante-item"},[u(e("input",{type:"checkbox",id:"user-"+l.id,value:l,"onUpdate:modelValue":o[17]||(o[17]=A=>b.value=A),class:"checkbox-styled"},null,8,Ae),[[Fo,b.value]]),e("label",{for:"user-"+l.id,class:"participante-label"},[e("div",Ue,[e("strong",null,n(l.nombre),1),e("span",we,n(l.rut),1)]),e("span",Le,n(l.email),1)],8,Ee)]))),128))])])):m("",!0),b.value.length>0?(t(),s("div",Ie,[...o[62]||(o[62]=[e("h4",null,"💵 Información del Pago Masivo",-1)])])):m("",!0),b.value.length>0?(t(),s("div",Fe,[e("div",Be,[o[64]||(o[64]=e("label",null,"Valor por Persona *",-1)),e("div",je,[o[63]||(o[63]=e("span",{class:"prefix"},"$",-1)),u(e("input",{"onUpdate:modelValue":o[18]||(o[18]=l=>d.value.valor_pagado=l),type:"number",required:"",placeholder:"25000"},null,512),[[g,d.value.valor_pagado,void 0,{number:!0}]])])]),e("div",$e,[o[65]||(o[65]=e("label",null,"Fecha de Pago *",-1)),u(e("input",{"onUpdate:modelValue":o[19]||(o[19]=l=>d.value.fecha_pago=l),type:"date",required:""},null,512),[[g,d.value.fecha_pago]])]),e("div",De,[o[67]||(o[67]=e("label",null,"Método de Pago",-1)),u(e("select",{"onUpdate:modelValue":o[20]||(o[20]=l=>d.value.metodo_pago=l)},[...o[66]||(o[66]=[e("option",{value:"Transferencia"},"Transferencia",-1),e("option",{value:"Efectivo"},"Efectivo",-1),e("option",{value:"Tarjeta"},"Tarjeta",-1)])],512),[[x,d.value.metodo_pago]])])])):m("",!0),b.value.length>0?(t(),s("div",Ge,[o[68]||(o[68]=e("label",null,"Comprobante Grupal *",-1)),e("div",Re,[e("input",{type:"file",onChange:mo,id:"file-masivo",accept:".pdf,.jpg,.jpeg,.png",required:""},null,32),e("label",he,[p(v,{name:"file",size:18}),e("span",null,n(d.value.file?d.value.file.name:"Seleccionar archivo"),1)])])])):m("",!0),b.value.length>0&&d.value.valor_pagado?(t(),s("div",qe,[e("div",Ne,[o[69]||(o[69]=e("span",null,"Participantes seleccionados:",-1)),e("strong",null,n(b.value.length),1)]),e("div",Oe,[o[70]||(o[70]=e("span",null,"Valor por persona:",-1)),e("strong",null,"$"+n(d.value.valor_pagado.toLocaleString("es-CL")),1)]),e("div",He,[o[71]||(o[71]=e("span",null,"Total a registrar:",-1)),e("strong",null,"$"+n((b.value.length*d.value.valor_pagado).toLocaleString("es-CL")),1)])])):m("",!0),b.value.length>0?(t(),s("div",Je,[e("button",{type:"submit",class:"btn btn-primario",disabled:!d.value.file||!d.value.valor_pagado},[p(v,{name:"check",size:16}),f(" Registrar Pago Masivo ("+n(b.value.length)+") ",1)],8,Ke),e("button",{type:"button",onClick:oo,class:"btn btn-secundario"},[p(v,{name:"x",size:16}),o[72]||(o[72]=f(" Cancelar ",-1))])])):m("",!0)],32)):m("",!0)])])):m("",!0),E.value==="historico"?(t(),s("div",Qe,[e("div",We,[e("div",Xe,[e("h3",null,[p(v,{name:"chart-bar",size:24}),o[73]||(o[73]=f(" Histórico de Pagos",-1))]),o[74]||(o[74]=e("p",null,"Consulta y administra todos los pagos registrados",-1))]),e("div",Ye,[e("div",Ze,[e("div",ol,[o[75]||(o[75]=e("label",null,"Buscar",-1)),u(e("input",{type:"text","onUpdate:modelValue":o[21]||(o[21]=l=>G.value=l),placeholder:"Nombre, RUT, Email...",class:"search-input",onKeyup:o[22]||(o[22]=Io((...l)=>a.buscar&&a.buscar(...l),["enter"]))},null,544),[[g,G.value]])]),e("div",el,[o[77]||(o[77]=e("label",null,"Curso",-1)),u(e("select",{"onUpdate:modelValue":o[23]||(o[23]=l=>L.value=l)},[o[76]||(o[76]=e("option",{value:""},"Todos los cursos",-1)),(t(!0),s(_,null,z($.value,l=>(t(),s("option",{key:l.value,value:l.value},n(l.label),9,ll))),128))],512),[[x,L.value]])]),e("div",al,[o[79]||(o[79]=e("label",null,"Grupo",-1)),u(e("select",{"onUpdate:modelValue":o[24]||(o[24]=l=>I.value=l)},[o[78]||(o[78]=e("option",{value:""},"Todos los grupos",-1)),(t(!0),s(_,null,z(D.value,l=>(t(),s("option",{key:l.value,value:l.value},n(l.label),9,tl))),128))],512),[[x,I.value]])]),e("div",sl,[o[81]||(o[81]=e("label",null,"Estado",-1)),u(e("select",{"onUpdate:modelValue":o[25]||(o[25]=l=>F.value=l)},[...o[80]||(o[80]=[e("option",{value:""},"Todos",-1),e("option",{value:"Confirmado"},"Confirmado",-1),e("option",{value:"Pendiente"},"Pendiente",-1),e("option",{value:"Anulado"},"Anulado",-1)])],512),[[x,F.value]])])]),e("div",nl,[e("button",{onClick:Po,class:"btn btn-primario"},[p(v,{name:"search",size:16}),o[82]||(o[82]=f(" Buscar ",-1))]),e("button",{onClick:_o,class:"btn btn-secundario"},[p(v,{name:"refresh",size:16}),o[83]||(o[83]=f(" Limpiar Filtros ",-1))]),e("button",{onClick:Uo,class:"btn btn-success"},[p(v,{name:"download",size:16}),o[84]||(o[84]=f(" Exportar Excel ",-1))])])]),e("div",rl,[e("table",null,[o[87]||(o[87]=e("thead",null,[e("tr",null,[e("th",null,"Nombre"),e("th",null,"RUT"),e("th",null,"Curso"),e("th",null,"Grupo"),e("th",null,"Monto"),e("th",null,"Fecha"),e("th",null,"Estado"),e("th",null,"Acciones")])],-1)),e("tbody",null,[H.value?(t(),s("tr",il,[...o[85]||(o[85]=[e("td",{colspan:"8",class:"loading-cell"},[e("span",{class:"spinner"}),f(" Cargando pagos... ")],-1)])])):M.value.length===0?(t(),s("tr",ul,[...o[86]||(o[86]=[e("td",{colspan:"8",class:"no-results"}," No se encontraron pagos con los filtros aplicados ",-1)])])):(t(!0),s(_,{key:2},z(zo.value,l=>(t(),s("tr",{key:l.id},[e("td",null,[e("strong",null,n(l.nombre),1)]),e("td",null,n(l.rut),1),e("td",null,n(l.curso),1),e("td",null,[e("span",dl,n(l.grupo),1)]),e("td",vl,"$"+n(l.monto.toLocaleString("es-CL")),1),e("td",null,n(xo(l.fecha)),1),e("td",null,[e("span",{class:j(["badge-estado",`estado-${l.estado.toLowerCase()}`])},n(l.estado),3)]),e("td",pl,[e("button",{onClick:A=>Ao(l),class:"btn-icon btn-ver",title:"Ver detalle"},[p(v,{name:"eye",size:18})],8,cl),e("button",{onClick:A=>Vo(l),class:"btn-icon btn-editar",title:"Editar"},[p(v,{name:"edit",size:18})],8,ml),l.estado!=="Anulado"?(t(),s("button",{key:0,onClick:A=>So(l),class:"btn-icon btn-anular",title:"Anular"},[p(v,{name:"trash",size:18})],8,gl)):m("",!0),l.comprobante?(t(),s("button",{key:1,onClick:A=>Eo(l),class:"btn-icon",title:"Descargar comprobante"},[p(v,{name:"paperclip",size:18})],8,bl)):m("",!0)])]))),128))])])]),h.value>1?(t(),s("div",fl,[e("button",{onClick:o[26]||(o[26]=l=>eo(C.value-1)),disabled:C.value===1,class:"btn-pag"}," ← Anterior ",8,Cl),e("div",yl,[f(" Página "+n(C.value)+" de "+n(h.value)+" ",1),o[88]||(o[88]=e("span",{class:"separator"},"|",-1)),f(" Mostrando "+n((C.value-1)*B.value+1)+" - "+n(Math.min(C.value*B.value,M.value.length))+" de "+n(M.value.length),1)]),e("button",{onClick:o[27]||(o[27]=l=>eo(C.value+1)),disabled:C.value===h.value,class:"btn-pag"}," Siguiente → ",8,kl)])):m("",!0)])])):m("",!0),J.value?(t(),N(to,{key:2,onClose:Q},{default:ao(()=>[e("div",Pl,[o[94]||(o[94]=e("h3",null,"Editar Pago",-1)),e("div",_l,[o[89]||(o[89]=e("label",null,"Nombre",-1)),u(e("input",{"onUpdate:modelValue":o[28]||(o[28]=l=>c.value.nombre=l),type:"text",readonly:""},null,512),[[g,c.value.nombre]])]),e("div",zl,[o[90]||(o[90]=e("label",null,"RUT",-1)),u(e("input",{"onUpdate:modelValue":o[29]||(o[29]=l=>c.value.rut=l),type:"text",readonly:""},null,512),[[g,c.value.rut]])]),e("div",xl,[o[91]||(o[91]=e("label",null,"Email",-1)),u(e("input",{"onUpdate:modelValue":o[30]||(o[30]=l=>c.value.email=l),type:"email"},null,512),[[g,c.value.email]])]),e("div",Vl,[o[92]||(o[92]=e("label",null,"Teléfono",-1)),u(e("input",{"onUpdate:modelValue":o[31]||(o[31]=l=>c.value.telefono=l),type:"text"},null,512),[[g,c.value.telefono]])]),e("div",Sl,[o[93]||(o[93]=e("label",null,"Dirección",-1)),u(e("input",{"onUpdate:modelValue":o[32]||(o[32]=l=>c.value.direccion=l),type:"text"},null,512),[[g,c.value.direccion]])]),e("div",{class:"modal-actions"},[e("button",{onClick:To,class:"btn btn-primario"},"Guardar"),e("button",{onClick:Q,class:"btn btn-secundario"},"Cancelar")])])]),_:1})):m("",!0),K.value?(t(),N(to,{key:3,onClose:W},{default:ao(()=>[e("div",Tl,[o[97]||(o[97]=e("h3",null,"Confirmar Anulación",-1)),e("p",null,[o[95]||(o[95]=f("¿Está seguro de que desea anular el pago de ",-1)),e("strong",null,n(c.value?.nombre),1),o[96]||(o[96]=f("?",-1))]),e("div",{class:"modal-actions"},[e("button",{onClick:Mo,class:"btn btn-danger"},"Anular"),e("button",{onClick:W,class:"btn btn-secundario"},"Cancelar")])])]),_:1})):m("",!0),U.value.mensaje?(t(),N(Bo,{key:4,message:U.value.mensaje,onClose:o[33]||(o[33]=l=>U.value.mensaje="")},null,8,["message"])):m("",!0)]))}},Il=wo(Ml,[["__scopeId","data-v-758691da"]]);export{Il as default};
